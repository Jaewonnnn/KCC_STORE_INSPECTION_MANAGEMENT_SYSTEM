<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sims.aop.mapper.LogMapper">
    <insert id="insertLoginLog" parameterType="LoginLogDao">
        INSERT INTO LOGINLOG ( /* LogMapper.insertLoginLog 유재원 */
            "LOGIN_LOG_ID",
            "CONNECTION_ID",
            "CONNECTION_IP",
            "CONNECTION_OS",
            "CONNECTION_BROWSER",
            "ERROE_OCCURRENCE_CD",
            "ERROE_CODE",
            "LOGIN_OCCURRENCE_DATE"
        )
        VALUES (
            loginlog_seq.NEXTVAL,
            #{connectionId},
            #{connectionIp},
            #{connectionOs},
            #{connectionBrowser},
            CASE
                WHEN
                    #{errorOccurrenceCd} = 1
                THEN '1'
                ELSE '0'
            END,
            NULL,
            TO_CHAR(current_date, 'YYYYMMDDHH24MI')
        )
    </insert>
</mapper>
